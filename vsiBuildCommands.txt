set workspaceDir ./3d_printer_line
set digitalTwinName 3DPrinterLine_6Stations

add component -type Python -name PLC_LineCoordinator
add component -type Python -name ST1_ComponentKitting
add component -type Python -name ST2_FrameCoreAssembly
add component -type Python -name ST3_ElectronicsWiring
add component -type Python -name ST4_CalibrationTesting
add component -type Python -name ST5_QualityInspection
add component -type Python -name ST6_PackagingDispatch

add port -componentName PLC_LineCoordinator -name PLC_ETH -gateway python2DtEthernet
add port -componentName ST1_ComponentKitting -name ST1_ETH -gateway python2DtEthernet
add port -componentName ST2_FrameCoreAssembly -name ST2_ETH -gateway python2DtEthernet
add port -componentName ST3_ElectronicsWiring -name ST3_ETH -gateway python2DtEthernet
add port -componentName ST4_CalibrationTesting -name ST4_ETH -gateway python2DtEthernet
add port -componentName ST5_QualityInspection -name ST5_ETH -gateway python2DtEthernet
add port -componentName ST6_PackagingDispatch -name ST6_ETH -gateway python2DtEthernet

add portSocket -componentName PLC_LineCoordinator -portName PLC_ETH -ipPortNum 6001 -socketType server -protocol tcpIp
add portSocket -componentName ST1_ComponentKitting -portName ST1_ETH -ipPortNum 6001 -socketType client -protocol tcpIp
add portSocket -componentName PLC_LineCoordinator -portName PLC_ETH -ipPortNum 6002 -socketType server -protocol tcpIp
add portSocket -componentName ST2_FrameCoreAssembly -portName ST2_ETH -ipPortNum 6002 -socketType client -protocol tcpIp
add portSocket -componentName PLC_LineCoordinator -portName PLC_ETH -ipPortNum 6003 -socketType server -protocol tcpIp
add portSocket -componentName ST3_ElectronicsWiring -portName ST3_ETH -ipPortNum 6003 -socketType client -protocol tcpIp
add portSocket -componentName PLC_LineCoordinator -portName PLC_ETH -ipPortNum 6004 -socketType server -protocol tcpIp
add portSocket -componentName ST4_CalibrationTesting -portName ST4_ETH -ipPortNum 6004 -socketType client -protocol tcpIp
add portSocket -componentName PLC_LineCoordinator -portName PLC_ETH -ipPortNum 6005 -socketType server -protocol tcpIp
add portSocket -componentName ST5_QualityInspection -portName ST5_ETH -ipPortNum 6005 -socketType client -protocol tcpIp
add portSocket -componentName PLC_LineCoordinator -portName PLC_ETH -ipPortNum 6006 -socketType server -protocol tcpIp
add portSocket -componentName ST6_PackagingDispatch -portName ST6_ETH -ipPortNum 6006 -socketType client -protocol tcpIp

config port -componentName PLC_LineCoordinator -portName PLC_ETH -macAddress 02:00:00:00:00:01 -ipAddress 10.10.0.1 -networkMode simulated
config port -componentName ST1_ComponentKitting -portName ST1_ETH -macAddress 02:00:00:00:00:11 -ipAddress 10.10.0.11 -networkMode simulated
config port -componentName ST2_FrameCoreAssembly -portName ST2_ETH -macAddress 02:00:00:00:00:12 -ipAddress 10.10.0.12 -networkMode simulated
config port -componentName ST3_ElectronicsWiring -portName ST3_ETH -macAddress 02:00:00:00:00:13 -ipAddress 10.10.0.13 -networkMode simulated
config port -componentName ST4_CalibrationTesting -portName ST4_ETH -macAddress 02:00:00:00:00:14 -ipAddress 10.10.0.14 -networkMode simulated
config port -componentName ST5_QualityInspection -portName ST5_ETH -macAddress 02:00:00:00:00:15 -ipAddress 10.10.0.15 -networkMode simulated
config port -componentName ST6_PackagingDispatch -portName ST6_ETH -macAddress 02:00:00:00:00:16 -ipAddress 10.10.0.16 -networkMode simulated

define componentSignals -componentName PLC_LineCoordinator -signals "[S1_cmd_start:bool:output,S1_cmd_stop:bool:output,S1_cmd_reset:bool:output,S1_batch_id:uint32_t:output,S1_recipe_id:uint16_t:output,S1_ready:bool:input,S1_busy:bool:input,S1_fault:bool:input,S1_done:bool:input,S1_cycle_time_ms:uint32_t:input,S1_inventory_ok:bool:input,S1_any_arm_failed:bool:input,S2_cmd_start:bool:output,S2_cmd_stop:bool:output,S2_cmd_reset:bool:output,S2_batch_id:uint32_t:output,S2_recipe_id:uint16_t:output,S2_ready:bool:input,S2_busy:bool:input,S2_fault:bool:input,S2_done:bool:input,S2_cycle_time_ms:uint32_t:input,S2_completed:uint32_t:input,S2_scrapped:uint32_t:input,S2_reworks:uint32_t:input,S2_cycle_time_avg_s:double:input,S3_cmd_start:bool:output,S3_cmd_stop:bool:output,S3_cmd_reset:bool:output,S3_batch_id:uint32_t:output,S3_recipe_id:uint16_t:output,S3_ready:bool:input,S3_busy:bool:input,S3_fault:bool:input,S3_done:bool:input,S3_cycle_time_ms:uint32_t:input,S3_strain_relief_ok:bool:input,S3_continuity_ok:bool:input,S4_cmd_start:bool:output,S4_cmd_stop:bool:output,S4_cmd_reset:bool:output,S4_batch_id:uint32_t:output,S4_recipe_id:uint16_t:output,S4_ready:bool:input,S4_busy:bool:input,S4_fault:bool:input,S4_done:bool:input,S4_cycle_time_ms:uint32_t:input,S4_total:uint32_t:input,S4_completed:uint32_t:input,S5_cmd_start:bool:output,S5_cmd_stop:bool:output,S5_cmd_reset:bool:output,S5_batch_id:uint32_t:output,S5_recipe_id:uint16_t:output,S5_ready:bool:input,S5_busy:bool:input,S5_fault:bool:input,S5_done:bool:input,S5_cycle_time_ms:uint32_t:input,S5_accept:uint32_t:input,S5_reject:uint32_t:input,S5_last_accept:bool:input,S6_cmd_start:bool:output,S6_cmd_stop:bool:output,S6_cmd_reset:bool:output,S6_batch_id:uint32_t:output,S6_recipe_id:uint16_t:output,S6_ready:bool:input,S6_busy:bool:input,S6_fault:bool:input,S6_done:bool:input,S6_cycle_time_ms:uint32_t:input,S6_packages_completed:uint32_t:input,S6_arm_cycles:uint32_t:input,S6_total_repairs:uint32_t:input,S6_operational_time_s:double:input,S6_downtime_s:double:input,S6_availability:double:input]"
define componentSignals -componentName ST1_ComponentKitting -signals "[cmd_start:bool:input,cmd_stop:bool:input,cmd_reset:bool:input,batch_id:uint32_t:input,recipe_id:uint16_t:input,ready:bool:output,busy:bool:output,fault:bool:output,done:bool:output,cycle_time_ms:uint32_t:output,inventory_ok:bool:output,any_arm_failed:bool:output]"
define componentSignals -componentName ST2_FrameCoreAssembly -signals "[cmd_start:bool:input,cmd_stop:bool:input,cmd_reset:bool:input,batch_id:uint32_t:input,recipe_id:uint16_t:input,ready:bool:output,busy:bool:output,fault:bool:output,done:bool:output,cycle_time_ms:uint32_t:output,completed:uint32_t:output,scrapped:uint32_t:output,reworks:uint32_t:output,cycle_time_avg_s:double:output]"
define componentSignals -componentName ST3_ElectronicsWiring -signals "[cmd_start:bool:input,cmd_stop:bool:input,cmd_reset:bool:input,batch_id:uint32_t:input,recipe_id:uint16_t:input,ready:bool:output,busy:bool:output,fault:bool:output,done:bool:output,cycle_time_ms:uint32_t:output,strain_relief_ok:bool:output,continuity_ok:bool:output]"
define componentSignals -componentName ST4_CalibrationTesting -signals "[cmd_start:bool:input,cmd_stop:bool:input,cmd_reset:bool:input,batch_id:uint32_t:input,recipe_id:uint16_t:input,ready:bool:output,busy:bool:output,fault:bool:output,done:bool:output,cycle_time_ms:uint32_t:output,total:uint32_t:output,completed:uint32_t:output]"
define componentSignals -componentName ST5_QualityInspection -signals "[cmd_start:bool:input,cmd_stop:bool:input,cmd_reset:bool:input,batch_id:uint32_t:input,recipe_id:uint16_t:input,ready:bool:output,busy:bool:output,fault:bool:output,done:bool:output,cycle_time_ms:uint32_t:output,accept:uint32_t:output,reject:uint32_t:output,last_accept:bool:output]"
define componentSignals -componentName ST6_PackagingDispatch -signals "[cmd_start:bool:input,cmd_stop:bool:input,cmd_reset:bool:input,batch_id:uint32_t:input,recipe_id:uint16_t:input,ready:bool:output,busy:bool:output,fault:bool:output,done:bool:output,cycle_time_ms:uint32_t:output,packages_completed:uint32_t:output,arm_cycles:uint32_t:output,total_repairs:uint32_t:output,operational_time_s:double:output,downtime_s:double:output,availability:double:output]"

connect signals -sourceSignal PLC_LineCoordinator.S1_cmd_start -destSignal ST1_ComponentKitting.cmd_start -sourcePortName PLC_ETH -destPortName ST1_ETH
connect signals -sourceSignal PLC_LineCoordinator.S1_cmd_stop -destSignal ST1_ComponentKitting.cmd_stop -sourcePortName PLC_ETH -destPortName ST1_ETH
connect signals -sourceSignal PLC_LineCoordinator.S1_cmd_reset -destSignal ST1_ComponentKitting.cmd_reset -sourcePortName PLC_ETH -destPortName ST1_ETH
connect signals -sourceSignal PLC_LineCoordinator.S1_batch_id -destSignal ST1_ComponentKitting.batch_id -sourcePortName PLC_ETH -destPortName ST1_ETH
connect signals -sourceSignal PLC_LineCoordinator.S1_recipe_id -destSignal ST1_ComponentKitting.recipe_id -sourcePortName PLC_ETH -destPortName ST1_ETH
connect signals -sourceSignal ST1_ComponentKitting.ready -destSignal PLC_LineCoordinator.S1_ready -sourcePortName ST1_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST1_ComponentKitting.busy -destSignal PLC_LineCoordinator.S1_busy -sourcePortName ST1_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST1_ComponentKitting.fault -destSignal PLC_LineCoordinator.S1_fault -sourcePortName ST1_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST1_ComponentKitting.done -destSignal PLC_LineCoordinator.S1_done -sourcePortName ST1_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST1_ComponentKitting.cycle_time_ms -destSignal PLC_LineCoordinator.S1_cycle_time_ms -sourcePortName ST1_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST1_ComponentKitting.inventory_ok -destSignal PLC_LineCoordinator.S1_inventory_ok -sourcePortName ST1_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST1_ComponentKitting.any_arm_failed -destSignal PLC_LineCoordinator.S1_any_arm_failed -sourcePortName ST1_ETH -destPortName PLC_ETH
connect signals -sourceSignal PLC_LineCoordinator.S2_cmd_start -destSignal ST2_FrameCoreAssembly.cmd_start -sourcePortName PLC_ETH -destPortName ST2_ETH
connect signals -sourceSignal PLC_LineCoordinator.S2_cmd_stop -destSignal ST2_FrameCoreAssembly.cmd_stop -sourcePortName PLC_ETH -destPortName ST2_ETH
connect signals -sourceSignal PLC_LineCoordinator.S2_cmd_reset -destSignal ST2_FrameCoreAssembly.cmd_reset -sourcePortName PLC_ETH -destPortName ST2_ETH
connect signals -sourceSignal PLC_LineCoordinator.S2_batch_id -destSignal ST2_FrameCoreAssembly.batch_id -sourcePortName PLC_ETH -destPortName ST2_ETH
connect signals -sourceSignal PLC_LineCoordinator.S2_recipe_id -destSignal ST2_FrameCoreAssembly.recipe_id -sourcePortName PLC_ETH -destPortName ST2_ETH
connect signals -sourceSignal ST2_FrameCoreAssembly.ready -destSignal PLC_LineCoordinator.S2_ready -sourcePortName ST2_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST2_FrameCoreAssembly.busy -destSignal PLC_LineCoordinator.S2_busy -sourcePortName ST2_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST2_FrameCoreAssembly.fault -destSignal PLC_LineCoordinator.S2_fault -sourcePortName ST2_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST2_FrameCoreAssembly.done -destSignal PLC_LineCoordinator.S2_done -sourcePortName ST2_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST2_FrameCoreAssembly.cycle_time_ms -destSignal PLC_LineCoordinator.S2_cycle_time_ms -sourcePortName ST2_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST2_FrameCoreAssembly.completed -destSignal PLC_LineCoordinator.S2_completed -sourcePortName ST2_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST2_FrameCoreAssembly.scrapped -destSignal PLC_LineCoordinator.S2_scrapped -sourcePortName ST2_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST2_FrameCoreAssembly.reworks -destSignal PLC_LineCoordinator.S2_reworks -sourcePortName ST2_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST2_FrameCoreAssembly.cycle_time_avg_s -destSignal PLC_LineCoordinator.S2_cycle_time_avg_s -sourcePortName ST2_ETH -destPortName PLC_ETH
connect signals -sourceSignal PLC_LineCoordinator.S3_cmd_start -destSignal ST3_ElectronicsWiring.cmd_start -sourcePortName PLC_ETH -destPortName ST3_ETH
connect signals -sourceSignal PLC_LineCoordinator.S3_cmd_stop -destSignal ST3_ElectronicsWiring.cmd_stop -sourcePortName PLC_ETH -destPortName ST3_ETH
connect signals -sourceSignal PLC_LineCoordinator.S3_cmd_reset -destSignal ST3_ElectronicsWiring.cmd_reset -sourcePortName PLC_ETH -destPortName ST3_ETH
connect signals -sourceSignal PLC_LineCoordinator.S3_batch_id -destSignal ST3_ElectronicsWiring.batch_id -sourcePortName PLC_ETH -destPortName ST3_ETH
connect signals -sourceSignal PLC_LineCoordinator.S3_recipe_id -destSignal ST3_ElectronicsWiring.recipe_id -sourcePortName PLC_ETH -destPortName ST3_ETH
connect signals -sourceSignal ST3_ElectronicsWiring.ready -destSignal PLC_LineCoordinator.S3_ready -sourcePortName ST3_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST3_ElectronicsWiring.busy -destSignal PLC_LineCoordinator.S3_busy -sourcePortName ST3_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST3_ElectronicsWiring.fault -destSignal PLC_LineCoordinator.S3_fault -sourcePortName ST3_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST3_ElectronicsWiring.done -destSignal PLC_LineCoordinator.S3_done -sourcePortName ST3_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST3_ElectronicsWiring.cycle_time_ms -destSignal PLC_LineCoordinator.S3_cycle_time_ms -sourcePortName ST3_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST3_ElectronicsWiring.strain_relief_ok -destSignal PLC_LineCoordinator.S3_strain_relief_ok -sourcePortName ST3_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST3_ElectronicsWiring.continuity_ok -destSignal PLC_LineCoordinator.S3_continuity_ok -sourcePortName ST3_ETH -destPortName PLC_ETH
connect signals -sourceSignal PLC_LineCoordinator.S4_cmd_start -destSignal ST4_CalibrationTesting.cmd_start -sourcePortName PLC_ETH -destPortName ST4_ETH
connect signals -sourceSignal PLC_LineCoordinator.S4_cmd_stop -destSignal ST4_CalibrationTesting.cmd_stop -sourcePortName PLC_ETH -destPortName ST4_ETH
connect signals -sourceSignal PLC_LineCoordinator.S4_cmd_reset -destSignal ST4_CalibrationTesting.cmd_reset -sourcePortName PLC_ETH -destPortName ST4_ETH
connect signals -sourceSignal PLC_LineCoordinator.S4_batch_id -destSignal ST4_CalibrationTesting.batch_id -sourcePortName PLC_ETH -destPortName ST4_ETH
connect signals -sourceSignal PLC_LineCoordinator.S4_recipe_id -destSignal ST4_CalibrationTesting.recipe_id -sourcePortName PLC_ETH -destPortName ST4_ETH
connect signals -sourceSignal ST4_CalibrationTesting.ready -destSignal PLC_LineCoordinator.S4_ready -sourcePortName ST4_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST4_CalibrationTesting.busy -destSignal PLC_LineCoordinator.S4_busy -sourcePortName ST4_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST4_CalibrationTesting.fault -destSignal PLC_LineCoordinator.S4_fault -sourcePortName ST4_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST4_CalibrationTesting.done -destSignal PLC_LineCoordinator.S4_done -sourcePortName ST4_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST4_CalibrationTesting.cycle_time_ms -destSignal PLC_LineCoordinator.S4_cycle_time_ms -sourcePortName ST4_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST4_CalibrationTesting.total -destSignal PLC_LineCoordinator.S4_total -sourcePortName ST4_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST4_CalibrationTesting.completed -destSignal PLC_LineCoordinator.S4_completed -sourcePortName ST4_ETH -destPortName PLC_ETH
connect signals -sourceSignal PLC_LineCoordinator.S5_cmd_start -destSignal ST5_QualityInspection.cmd_start -sourcePortName PLC_ETH -destPortName ST5_ETH
connect signals -sourceSignal PLC_LineCoordinator.S5_cmd_stop -destSignal ST5_QualityInspection.cmd_stop -sourcePortName PLC_ETH -destPortName ST5_ETH
connect signals -sourceSignal PLC_LineCoordinator.S5_cmd_reset -destSignal ST5_QualityInspection.cmd_reset -sourcePortName PLC_ETH -destPortName ST5_ETH
connect signals -sourceSignal PLC_LineCoordinator.S5_batch_id -destSignal ST5_QualityInspection.batch_id -sourcePortName PLC_ETH -destPortName ST5_ETH
connect signals -sourceSignal PLC_LineCoordinator.S5_recipe_id -destSignal ST5_QualityInspection.recipe_id -sourcePortName PLC_ETH -destPortName ST5_ETH
connect signals -sourceSignal ST5_QualityInspection.ready -destSignal PLC_LineCoordinator.S5_ready -sourcePortName ST5_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST5_QualityInspection.busy -destSignal PLC_LineCoordinator.S5_busy -sourcePortName ST5_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST5_QualityInspection.fault -destSignal PLC_LineCoordinator.S5_fault -sourcePortName ST5_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST5_QualityInspection.done -destSignal PLC_LineCoordinator.S5_done -sourcePortName ST5_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST5_QualityInspection.cycle_time_ms -destSignal PLC_LineCoordinator.S5_cycle_time_ms -sourcePortName ST5_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST5_QualityInspection.accept -destSignal PLC_LineCoordinator.S5_accept -sourcePortName ST5_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST5_QualityInspection.reject -destSignal PLC_LineCoordinator.S5_reject -sourcePortName ST5_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST5_QualityInspection.last_accept -destSignal PLC_LineCoordinator.S5_last_accept -sourcePortName ST5_ETH -destPortName PLC_ETH
connect signals -sourceSignal PLC_LineCoordinator.S6_cmd_start -destSignal ST6_PackagingDispatch.cmd_start -sourcePortName PLC_ETH -destPortName ST6_ETH
connect signals -sourceSignal PLC_LineCoordinator.S6_cmd_stop -destSignal ST6_PackagingDispatch.cmd_stop -sourcePortName PLC_ETH -destPortName ST6_ETH
connect signals -sourceSignal PLC_LineCoordinator.S6_cmd_reset -destSignal ST6_PackagingDispatch.cmd_reset -sourcePortName PLC_ETH -destPortName ST6_ETH
connect signals -sourceSignal PLC_LineCoordinator.S6_batch_id -destSignal ST6_PackagingDispatch.batch_id -sourcePortName PLC_ETH -destPortName ST6_ETH
connect signals -sourceSignal PLC_LineCoordinator.S6_recipe_id -destSignal ST6_PackagingDispatch.recipe_id -sourcePortName PLC_ETH -destPortName ST6_ETH
connect signals -sourceSignal ST6_PackagingDispatch.ready -destSignal PLC_LineCoordinator.S6_ready -sourcePortName ST6_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST6_PackagingDispatch.busy -destSignal PLC_LineCoordinator.S6_busy -sourcePortName ST6_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST6_PackagingDispatch.fault -destSignal PLC_LineCoordinator.S6_fault -sourcePortName ST6_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST6_PackagingDispatch.done -destSignal PLC_LineCoordinator.S6_done -sourcePortName ST6_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST6_PackagingDispatch.cycle_time_ms -destSignal PLC_LineCoordinator.S6_cycle_time_ms -sourcePortName ST6_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST6_PackagingDispatch.packages_completed -destSignal PLC_LineCoordinator.S6_packages_completed -sourcePortName ST6_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST6_PackagingDispatch.arm_cycles -destSignal PLC_LineCoordinator.S6_arm_cycles -sourcePortName ST6_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST6_PackagingDispatch.total_repairs -destSignal PLC_LineCoordinator.S6_total_repairs -sourcePortName ST6_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST6_PackagingDispatch.operational_time_s -destSignal PLC_LineCoordinator.S6_operational_time_s -sourcePortName ST6_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST6_PackagingDispatch.downtime_s -destSignal PLC_LineCoordinator.S6_downtime_s -sourcePortName ST6_ETH -destPortName PLC_ETH
connect signals -sourceSignal ST6_PackagingDispatch.availability -destSignal PLC_LineCoordinator.S6_availability -sourcePortName ST6_ETH -destPortName PLC_ETH




set totalSimTime 2500 s

generate -overwrite
save
